<!DOCTYPE html>
<html>

<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>

<head>
    <meta charset="UTF-8">
    <title>Paddle</title>
    <style type="text/css">
        canvas {
            border: 5px solid black;
            /* Black border */
            background-color: white;
            /* White background */
        }
    </style>
</head>

<body>
    <h1>Kyrylo Kozlovskyi</h1>
    <!-- Canvas 500x500 -->
    <canvas id="canvas-for-ball" height="500" width="500"></canvas>
    <!-- Script -->
    <script type="text/javascript">
        // Number of clicks
        var noClicks = 0;
        // Element id for canvas
        var canvas = document.getElementById("canvas-for-ball");
        // 2d context
        var ctx = canvas.getContext("2d");

        // Paddle class
        class Paddle {
            // Constructor for paddle class with x, y, width, height parameters
            constructor(x, y, width, height) {
                this.width = width;
                this.height = height;
                this.x = x;
                this.y = y;
            }

            // Draw paddle
            draw() {
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); // Clear canvas
                ctx.beginPath();
                ctx.rect(this.x, this.y, this.width, this.height); // Draw the paddle
                ctx.stroke();
            }

            // Move the paddle
            move(direction) {
                const step = 10; // Step size for paddle movement
                if (direction === 'up' && this.y > 0) {
                    this.y -= step;
                } else if (direction === 'down' && this.y < canvas.height - this.height) {
                    this.y += step;
                }
                this.draw();
            }
        }

        // Create a new paddle object
        var paddle;

        // Mouse event listener
        canvas.addEventListener("click", function (event) {
            // Calculate position of the canvas DOM element on the page
            var canvasPosition = {
                x: canvas.offsetLeft,
                y: canvas.offsetTop
            };
            // Get current mouse position relative to the browser window
            var mouse = {
                x: event.clientX - canvasPosition.x,
                y: event.clientY - canvasPosition.y
            };
            paddle = new Paddle(mouse.x, mouse.y, 25, 150); // Create a new paddle object
            
            console.log(event); // Event log
            paddle.draw(); // Draw the paddle
            noClicks += 1;
            console.log(noClicks);
        });

        // Keyboard event listener
        $(document.body).on('keydown', function (e) {
            if (paddle) {
                console.log(e.which);
                switch (e.which) {
                    // key code for up arrow
                    case 38:
                        console.log('up arrow key pressed!');
                        paddle.move('up');
                        break;

                    // key code for down arrow
                    case 40:
                        console.log('down arrow key pressed!');
                        paddle.move('down');
                        break;
                }
            }
        });

        function repeatme() {
            if (paddle) {
                paddle.draw(); // Draw the paddle
            }
            window.requestAnimationFrame(repeatme); // Draw the frame
        }
        repeatme(); // Start animation
    </script>
</body>

</html>